<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>é¦™æ¸¯å®…é…æ•°æ®çœ‹æ¿</title>
    <script src="./libs/echarts.min.js"></script>
    <script src="./libs/jquery.min.js"></script>
    <style>
        body { 
            margin: 0; 
            background-color: #ffffff; 
            font-family: 'Arial', sans-serif; 
            overflow: hidden; 
        }
        h1 { 
            color: #333; 
            text-align: center; 
            padding: 15px; 
            margin: 0; 
            background: #f8f9fa; 
            border-bottom: 1px solid #e0e0e0; 
            font-size: 22px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #map-container { 
            width: 100vw; 
            height: calc(100vh - 70px); 
            background: #ffffff;
            position: relative;
        }
        #data-modal, #progress-modal, #efficiency-modal, #team-estate-modal {
            display: none; 
            position: fixed; 
            right: 20px; 
            top: 90px; 
            bottom: 20px;
            width: 450px; 
            background: white;
            border: 2px solid #4d90fe; 
            box-shadow: -5px 5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000; 
            padding: 20px; 
            color: #333; 
            overflow-y: auto;
            border-radius: 12px;
        }
        .close-btn { 
            float: right; 
            cursor: pointer; 
            font-size: 24px; 
            color: #4d90fe; 
            font-weight: bold;
            padding: 0 5px;
        }
        .close-btn:hover { color: #ff4444; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 20px; 
            font-size: 13px; 
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th { 
            background: #4d90fe; 
            color: white; 
            text-align: left; 
            padding: 12px 15px; 
            font-weight: 600;
            font-size: 12px;
        }
        td { 
            border-bottom: 1px solid #eee; 
            padding: 10px 15px; 
            color: #555; 
            background: white;
            font-size: 12px;
        }
        tr:hover td { background: #f5f9ff; }
        .tag { 
            padding: 4px 10px; 
            border-radius: 20px; 
            font-size: 11px; 
            font-weight: 600;
            display: inline-block;
        }
        .tag-pending { background: #ff9800; color: #fff; }
        .tag-done { background: #4caf50; color: #fff; }
        .tag-transit { background: #2196f3; color: #fff; }
        
        .info-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4d90fe;
        }
        .info-card-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .stats-container {
            display: flex;
            justify-content: space-between;
            text-align: center;
            margin: 20px 0;
            background: linear-gradient(135deg, #f0f7ff, #e3f2fd);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        .stat-item {
            flex: 1;
            padding: 10px 5px;
        }
        .stat-value {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .chart-controls {
            position: absolute;
            top: 85px;
            left: 20px;
            z-index: 100;
            background: white;
            padding: 12px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 180px;
        }
        .operation-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 5px;
        }
        
        .control-btn {
            background: #4d90fe;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .control-btn:hover { 
            background: #357ae8; 
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(53, 122, 232, 0.3);
        }
        
        .control-btn i {
            font-style: normal;
            font-weight: bold;
            font-size: 14px;
            min-width: 16px;
        }
        
        .control-btn-group {
            display: flex;
            gap: 5px;
        }
        
        .control-btn-group .control-btn {
            flex: 1;
            text-align: center;
            padding: 8px 5px;
            justify-content: center;
        }
        
        /* è¯¦æƒ…é¡µæŒ‰é’® */
        .detail-btn {
            background: #5a9cf8;
            border-left: 3px solid #4d90fe;
        }
        .layer-control {
            position: absolute;
            top: 85px;
            right: 20px;
            z-index: 100;
            background: white;
            padding: 12px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            font-size: 12px;
            min-width: 150px;
        }
        .layer-control strong {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-size: 13px;
        }
        .layer-control label {
            display: block;
            margin: 6px 0;
            cursor: pointer;
            color: #555;
        }
        .layer-control label:hover {
            color: #4d90fe;
        }
        .progress-bar {
            width: 100%;
            height: 18px;
            background-color: #f0f0f0;
            border-radius: 9px;
            overflow: hidden;
            margin: 5px 0;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #66bb6a);
            border-radius: 9px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg, 
                rgba(255,255,255,0.2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255,255,255,0.2) 50%, 
                rgba(255,255,255,0.2) 75%, 
                transparent 75%, 
                transparent
            );
            background-size: 20px 20px;
            animation: progressStripes 1s linear infinite;
        }
        
        @keyframes progressStripes {
            0% { background-position: 0 0; }
            100% { background-position: 20px 0; }
        }
        
        .progress-text {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
            display: flex;
            justify-content: space-between;
        }
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .status-delivered { background-color: #4caf50; }
        .status-pending { background-color: #ff9800; }
        .status-transit { background-color: #2196f3; }
        .status-failed { background-color: #f44336; }
        .status-waiting { background-color: #9e9e9e; }
        .team-tag {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
            margin: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .team-sha { background: linear-gradient(135deg, #FF6B6B, #FF8E8E); color: white; }
        .team-yuen { background: linear-gradient(135deg, #4ECDC4, #6FE7DF); color: white; }
        .team-kow { background: linear-gradient(135deg, #45B7D1, #67D9F3); color: white; }
        .team-tuen { background: linear-gradient(135deg, #96CEB4, #B8E8D6); color: white; }
        .rank-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            border-radius: 50%;
            font-size: 11px;
            margin-right: 5px;
        }
        
        .rank-1 { background: gold; color: #333; }
        .rank-2 { background: silver; color: #333; }
        .rank-3 { background: #cd7f32; color: white; }
        .modal-title-icon {
            display: inline-block;
            margin-right: 10px;
            font-size: 18px;
        }
        .data-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .data-card-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4d90fe;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 5px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .divider {
            height: 1px;
            background: linear-gradient(to right, transparent, #e0e0e0, transparent);
            margin: 15px 0;
        }
        .timestamp {
            font-size: 11px;
            color: #888;
            text-align: center;
            margin-top: 10px;
            font-style: italic;
        }
        .error-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .error-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .error-detail {
            color: #666;
            font-size: 13px;
            margin-bottom: 15px;
        }
        
        .error-btn {
            background: #4d90fe;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        
        .error-btn:hover {
            background: #357ae8;
        }
    </style>
</head>
<body>

    <h1>é¦™æ¸¯å®…é…å®æ—¶ç›‘æ§</h1>
    
    <div class="chart-controls">
        <div class="control-btn-group">
            <button class="control-btn" onclick="zoomIn()"><i>+</i> æ”¾å¤§</button>
            <button class="control-btn" onclick="zoomOut()"><i>-</i> ç¼©å°</button>
            <button class="control-btn" onclick="resetZoom()"><i>â†»</i> é‡ç½®</button>
        </div>
        
        <div class="operation-buttons">
            <div class="data-card">
                <div class="data-card-title"><span class="loading"></span>æ•°æ®è¯¦æƒ…</div>
                <button class="control-btn detail-btn" onclick="showDeliveryProgress()">
                    <i>ğŸšš</i> é…é€è¿›åº¦
                </button>
                <button class="control-btn detail-btn" onclick="showEfficiency()">
                    <i>ğŸ‘¥</i> äººæ•ˆæ•°æ®
                </button>
                <button class="control-btn detail-btn" onclick="showTeamEstates()">
                    <i>ğŸ˜ï¸</i> è½¦é˜Ÿå°åŒº
                </button>
                <button class="control-btn" onclick="closeAllModals()">
                    <i>âœ•</i> å…³é—­è¯¦æƒ…
                </button>
            </div>
        </div>
    </div>
    
    <div class="layer-control">
        <strong>å›¾å±‚æ§åˆ¶</strong>
        <label>
            <input type="checkbox" id="district-toggle" checked onchange="toggleDistrictLayer()"> æ˜¾ç¤ºåŒºè¾¹ç•Œ
        </label>
        <label>
            <input type="checkbox" id="estate-toggle" checked onchange="toggleEstateLayer()"> æ˜¾ç¤ºå°åŒº
        </label>
        <label>
            <input type="checkbox" id="label-toggle" checked onchange="toggleLabels()"> æ˜¾ç¤ºæ ‡ç­¾
        </label>
    </div>
    
    <div id="map-container"></div>
    <div id="data-modal">
        <span class="close-btn" onclick="closeModal()">Ã—</span>
        <h2 id="modal-title" style="color:#4d90fe; margin-top:0; padding-right:20px;"></h2>
        <p id="modal-address" style="color:#666; font-size:13px; background:#f0f7ff; padding:8px; border-radius:4px;"></p>
        
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-value" id="val-total">0</div>
                <div class="stat-label">æ€»å•é‡</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" style="color:#ff9800" id="val-pending">0</div>
                <div class="stat-label">å¾…æ´¾é€</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" style="color:#4caf50" id="val-rate">0%</div>
                <div class="stat-label">æ´¾é€ç‡</div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ“‹ ä»Šæ—¥æ´¾é€è¯¦æƒ…</div>
            <table>
                <thead><tr><th>å•å·</th><th>æ”¶ä»¶äºº</th><th>çŠ¶æ€</th></tr></thead>
                <tbody id="modal-body"></tbody>
            </table>
        </div>
    </div>
    <div id="progress-modal">
        <span class="close-btn" onclick="closeModal('progress')">Ã—</span>
        <h2 style="color:#4d90fe; margin-top:0; padding-right:20px;">
            <span class="modal-title-icon">ğŸšš</span>é…é€è¿›åº¦æ€»è§ˆ
        </h2>
        <p style="color:#666; font-size:13px; background:#f0f7ff; padding:8px; border-radius:4px;">
            å„è½¦é˜Ÿä»Šæ—¥é…é€è¿›åº¦å®æ—¶ç›‘æ§ | æ›´æ–°æ—¶é—´: <span id="progress-time">--:--:--</span>
        </p>
        
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-value" id="progress-total">0</div>
                <div class="stat-label">æ€»å•é‡</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" style="color:#4caf50" id="progress-delivered">0</div>
                <div class="stat-label">å·²é€è¾¾</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" style="color:#ff9800" id="progress-ongoing">0</div>
                <div class="stat-label">è¿›è¡Œä¸­</div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ† è½¦é˜Ÿé…é€è¿›åº¦æ’å</div>
            <table>
                <thead>
                    <tr>
                        <th>æ’å</th>
                        <th>è½¦é˜Ÿ</th>
                        <th>æ€»å•é‡</th>
                        <th>è¿›åº¦</th>
                    </tr>
                </thead>
                <tbody id="progress-body"></tbody>
            </table>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ“Š é…é€çŠ¶æ€åˆ†å¸ƒ</div>
            <div id="progress-status"></div>
        </div>
        
        <div class="timestamp">æ•°æ®æ¯åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°</div>
    </div>
    <div id="efficiency-modal">
        <span class="close-btn" onclick="closeModal('efficiency')">Ã—</span>
        <h2 style="color:#4d90fe; margin-top:0; padding-right:20px;">
            <span class="modal-title-icon">ğŸ‘¥</span>äººæ•ˆæ•°æ®åˆ†æ
        </h2>
        <p style="color:#666; font-size:13px; background:#f0f7ff; padding:8px; border-radius:4px;">
            å„è½¦é˜Ÿäººå‡æ´¾é€æ•ˆç‡ç»Ÿè®¡ | æ›´æ–°æ—¶é—´: <span id="efficiency-time">--:--:--</span>
        </p>
        
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-value" id="efficiency-avg">0</div>
                <div class="stat-label">å¹³å‡äººæ•ˆ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="efficiency-total">0</div>
                <div class="stat-label">æ€»æ´¾é€æ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="efficiency-workers">0</div>
                <div class="stat-label">æ€»äººæ•°</div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ¥‡ è½¦é˜Ÿäººæ•ˆæ’å</div>
            <table>
                <thead>
                    <tr>
                        <th>æ’å</th>
                        <th>è½¦é˜Ÿ</th>
                        <th>äººæ•°</th>
                        <th>äººæ•ˆ</th>
                    </tr>
                </thead>
                <tbody id="efficiency-body"></tbody>
            </table>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ—ºï¸ åŒºåŸŸäººæ•ˆå¯¹æ¯”</div>
            <div id="efficiency-district"></div>
        </div>
        
        <div class="timestamp">æ•°æ®æ¯åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°</div>
    </div>
    <div id="team-estate-modal">
        <span class="close-btn" onclick="closeModal('team-estate')">Ã—</span>
        <h2 style="color:#4d90fe; margin-top:0; padding-right:20px;">
            <span class="modal-title-icon">ğŸ˜ï¸</span>è½¦é˜Ÿè´Ÿè´£å°åŒº
        </h2>
        <p style="color:#666; font-size:13px; background:#f0f7ff; padding:8px; border-radius:4px;">
            å„è½¦é˜Ÿè´Ÿè´£çš„å°åŒºåˆ†å¸ƒæƒ…å†µ | æ›´æ–°æ—¶é—´: <span id="team-estate-time">--:--:--</span>
        </p>
        
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-value" id="team-count">0</div>
                <div class="stat-label">è½¦é˜Ÿæ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="estate-count">0</div>
                <div class="stat-label">å°åŒºæ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="area-count">0</div>
                <div class="stat-label">è¦†ç›–åŒºåŸŸ</div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ“‹ è½¦é˜Ÿå°åŒºåˆ†å¸ƒ</div>
            <table>
                <thead>
                    <tr>
                        <th>è½¦é˜Ÿ</th>
                        <th>è´Ÿè´£åŒºåŸŸ</th>
                        <th>å°åŒºæ•°</th>
                        <th>æ€»å•é‡</th>
                    </tr>
                </thead>
                <tbody id="team-estate-body"></tbody>
            </table>
        </div>
        
        <div class="info-card">
            <div class="info-card-title">ğŸ  å°åŒºè¯¦ç»†åˆ—è¡¨</div>
            <div style="max-height: 300px; overflow-y: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>å°åŒºåç§°</th>
                            <th>æ‰€å±è½¦é˜Ÿ</th>
                            <th>æ‰€å±åŒºåŸŸ</th>
                        </tr>
                    </thead>
                    <tbody id="estate-list-body"></tbody>
                </table>
            </div>
        </div>
        
        <div class="timestamp">æ•°æ®æ¯åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°</div>
    </div>

    <script>
        var myChart = echarts.init(document.getElementById('map-container'));
        var currentZoom = 1.2;
        var selectedItem = null;
        var selectedType = null; 
        var initialCenter = [114.17, 22.32];
        var initialZoom = 6; 
        var districts = [
            { name: "ä¸­è¥¿åŒº", code: "CW", color: "#FF6B6B", total: 0, pending: 0, rate: 0 },
            { name: "æ¹¾ä»”åŒº", code: "WC", color: "#4ECDC4", total: 0, pending: 0, rate: 0 },
            { name: "ä¸œåŒº", code: "E", color: "#45B7D1", total: 0, pending: 0, rate: 0 },
            { name: "å—åŒº", code: "S", color: "#96CEB4", total: 0, pending: 0, rate: 0 },
            { name: "æ²¹å°–æ—ºåŒº", code: "YTM", color: "#FFEAA7", total: 0, pending: 0, rate: 0 },
            { name: "æ·±æ°´åŸ—åŒº", code: "SSP", color: "#DDA0DD", total: 0, pending: 0, rate: 0 },
            { name: "ä¹é¾™åŸåŒº", code: "KC", color: "#98D8C8", total: 1890, pending: 145, rate: 92.3 },
            { name: "é»„å¤§ä»™åŒº", code: "WTS", color: "#F7DC6F", total: 0, pending: 0, rate: 0 },
            { name: "è§‚å¡˜åŒº", code: "KT", color: "#BB8FCE", total: 0, pending: 0, rate: 0 },
            { name: "è‘µé’åŒº", code: "KC", color: "#85C1E9", total: 0, pending: 0, rate: 0 },
            { name: "èƒæ¹¾åŒº", code: "TW", color: "#F8C471", total: 0, pending: 0, rate: 0 },
            { name: "å±¯é—¨åŒº", code: "TM", color: "#82E0AA", total: 1560, pending: 115, rate: 92.6 },
            { name: "å…ƒæœ—åŒº", code: "YL", color: "#F1948A", total: 1780, pending: 140, rate: 92.1 },
            { name: "åŒ—åŒº", code: "N", color: "#BB8FCE", total: 0, pending: 0, rate: 0 },
            { name: "å¤§åŸ”åŒº", code: "TP", color: "#76D7C4", total: 0, pending: 0, rate: 0 },
            { name: "æ²™ç”°åŒº", code: "ST", color: "#7FB3D5", total: 1860, pending: 135, rate: 92.7 },
            { name: "è¥¿è´¡åŒº", code: "SK", color: "#D7BDE2", total: 0, pending: 0, rate: 0 },
            { name: "ç¦»å²›åŒº", code: "I", color: "#AED6F1", total: 0, pending: 0, rate: 0 }
        ];
        
        // ä½¿ç”¨Excelä¸­çš„ç»çº¬åº¦æ•°æ®åˆ›å»ºå°åŒºæ•°ç»„
        var estates = [
            { name: "ç¿ åèŠ±å›­æš‚å­˜ç‚¹", center: [114.201, 22.3768], district: "æ²™ç”°åŒº", total: 152, pending: 6, rate: 96.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºç¿ åèŠ±å›­" },
            { name: "æ²³ç•”èŠ±å›­æš‚å­˜ç‚¹", center: [114.2, 22.3781], district: "æ²™ç”°åŒº", total: 139, pending: 10, rate: 92.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ²³ç•”èŠ±å›­" },
            { name: "èŠ±å›­åŸæš‚å­˜ç‚¹", center: [114.202, 22.3767], district: "æ²™ç”°åŒº", total: 165, pending: 16, rate: 90.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºèŠ±å›­åŸ" },
            { name: "æº±å²¸8å·æš‚å­˜ç‚¹", center: [114.192, 22.3723], district: "æ²™ç”°åŒº", total: 148, pending: 8, rate: 94.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæº±å²¸8å·" },
            { name: "æµ·æ™¯èŠ±å›­æš‚å­˜ç‚¹", center: [113.989, 22.3757], district: "å±¯é—¨åŒº", total: 145, pending: 12, rate: 91.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºæµ·æ™¯èŠ±å›­" },
            { name: "æŸè”šæ£®-sjæš‚å­˜ç‚¹", center: [114.214, 22.3083], district: "ä¹é¾™åŸåŒº", total: 101, pending: 4, rate: 96.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºæŸè”šæ£®" },
            { name: "Novo Land-SJæš‚å­˜ç‚¹1", center: [113.975, 22.4081], district: "å±¯é—¨åŒº", total: 135, pending: 9, rate: 93.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºNovo Land" },
            { name: "Novo Land-SJæš‚å­˜ç‚¹2", center: [113.974, 22.4083], district: "å±¯é—¨åŒº", total: 138, pending: 11, rate: 92.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºNovo Land" },
            { name: "Novo Land-SJæš‚å­˜ç‚¹3", center: [113.976, 22.4082], district: "å±¯é—¨åŒº", total: 142, pending: 8, rate: 94.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºNovo Land" },
            { name: "çˆ±ç´æµ·å²¸-SJæš‚å­˜ç‚¹1", center: [114, 22.3703], district: "å±¯é—¨åŒº", total: 125, pending: 7, rate: 94.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºçˆ±ç´æµ·å²¸" },
            { name: "çˆ±ç´æµ·å²¸-SJæš‚å­˜ç‚¹2", center: [114, 22.3703], district: "å±¯é—¨åŒº", total: 127, pending: 9, rate: 92.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºçˆ±ç´æµ·å²¸" },
            { name: "çˆ±ç´æµ·å²¸-SJæš‚å­˜ç‚¹3", center: [114, 22.3703], district: "å±¯é—¨åŒº", total: 122, pending: 5, rate: 95.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºçˆ±ç´æµ·å²¸" },
            { name: "å’Œç”°é‚¨-SJæš‚å­˜ç‚¹1", center: [113.974, 22.4126], district: "å±¯é—¨åŒº", total: 98, pending: 3, rate: 96.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå’Œç”°é‚¨" },
            { name: "å’Œç”°é‚¨-SJæš‚å­˜ç‚¹2", center: [113.974, 22.4117], district: "å±¯é—¨åŒº", total: 95, pending: 6, rate: 93.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå’Œç”°é‚¨" },
            { name: "èç”°é‚¨-SJæš‚å­˜ç‚¹1", center: [113.976, 22.4094], district: "å±¯é—¨åŒº", total: 110, pending: 4, rate: 96.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºèç”°é‚¨" },
            { name: "èç”°é‚¨-SJæš‚å­˜ç‚¹2", center: [113.977, 22.4087], district: "å±¯é—¨åŒº", total: 108, pending: 7, rate: 93.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºèç”°é‚¨" },
            { name: "é¦™æ¸¯é»„é‡‘æµ·å²¸-SJæš‚å­˜ç‚¹", center: [113.997, 22.37], district: "å±¯é—¨åŒº", total: 115, pending: 9, rate: 92.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºé¦™æ¸¯é»„é‡‘æµ·å²¸" },
            { name: "The Yoho Hub-SJæš‚å­˜ç‚¹", center: [114.04, 22.442], district: "å…ƒæœ—åŒº", total: 142, pending: 11, rate: 92.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºThe Yoho Hub" },
            { name: "æ–°æ—¶ä»£å¹¿åœº-SJæš‚å­˜ç‚¹", center: [114.042, 22.4392], district: "å…ƒæœ—åŒº", total: 135, pending: 8, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæ–°æ—¶ä»£å¹¿åœº" },
            { name: "YOHO Midtown-SJæš‚å­˜ç‚¹", center: [114.042, 22.4408], district: "å…ƒæœ—åŒº", total: 148, pending: 12, rate: 91.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºYOHO Midtown" },
            { name: "æ–°å…ƒæœ—ä¸­å¿ƒ-SJæš‚å­˜ç‚¹1", center: [114.039, 22.4426], district: "å…ƒæœ—åŒº", total: 132, pending: 10, rate: 92.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæ–°å…ƒæœ—ä¸­å¿ƒ" },
            { name: "æ–°å…ƒæœ—ä¸­å¿ƒ-SJæš‚å­˜ç‚¹2", center: [114.04, 22.443], district: "å…ƒæœ—åŒº", total: 136, pending: 9, rate: 93.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæ–°å…ƒæœ—ä¸­å¿ƒ" },
            { name: "æµ·å…¸å±…æš‚å­˜ç‚¹", center: [114.238, 22.4241], district: "æ²™ç”°åŒº", total: 125, pending: 5, rate: 96.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæµ·å…¸å±…" },
            { name: "å…¨è¾‰ä¸­å¿ƒæš‚å­˜ç‚¹", center: [114.202, 22.3775], district: "æ²™ç”°åŒº", total: 118, pending: 8, rate: 93.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºå…¨è¾‰ä¸­å¿ƒ" },
            { name: "ç”°å›­é˜æš‚å­˜ç‚¹", center: [114.201, 22.3771], district: "æ²™ç”°åŒº", total: 122, pending: 6, rate: 95.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºç”°å›­é˜" },
            { name: "åŠ±åŸèŠ±å›­æš‚å­˜ç‚¹", center: [114.2, 22.3775], district: "æ²™ç”°åŒº", total: 115, pending: 9, rate: 92.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºåŠ±åŸèŠ±å›­" },
            { name: "çš‡å¾¡å±…æš‚å­˜ç‚¹", center: [114.202, 22.378], district: "æ²™ç”°åŒº", total: 128, pending: 7, rate: 94.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºçš‡å¾¡å±…" },
            { name: "å®å¯Œè‹‘æš‚å­˜ç‚¹", center: [114.033, 22.448], district: "å…ƒæœ—åŒº", total: 98, pending: 4, rate: 95.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå®å¯Œè‹‘" },
            { name: "è™¹æ–¹æš‚å­˜ç‚¹", center: [114.032, 22.4459], district: "å…ƒæœ—åŒº", total: 102, pending: 6, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºè™¹æ–¹" },
            { name: "å¤©ç‘ä¸€æ‘å¸è´§ç‚¹", center: [114.026, 22.4406], district: "å…ƒæœ—åŒº", total: 110, pending: 8, rate: 92.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©ç‘ä¸€æ‘" },
            { name: "å¤©ç‘äºŒæ‘å¸è´§ç‚¹", center: [114.037, 22.4334], district: "å…ƒæœ—åŒº", total: 108, pending: 7, rate: 93.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©ç‘äºŒæ‘" },
            { name: "å¤©è€€é‚¨å¸è´§ç‚¹1", center: [114.009, 22.4465], district: "å…ƒæœ—åŒº", total: 120, pending: 10, rate: 91.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©è€€é‚¨" },
            { name: "å¤©ä½‘è‹‘å¸è´§ç‚¹", center: [114.011, 22.4488], district: "å…ƒæœ—åŒº", total: 123, pending: 2, rate: 98.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©ä½‘è‹‘" },
            { name: "å¤©æ‚¦é‚¨æš‚å­˜ç‚¹", center: [114.005, 22.46], district: "å…ƒæœ—åŒº", total: 118, pending: 9, rate: 92.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ‚¦é‚¨" },
            { name: "å¤©å¯Œè‹‘æš‚å­˜ç‚¹", center: [114.003, 22.4625], district: "å…ƒæœ—åŒº", total: 112, pending: 7, rate: 93.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©å¯Œè‹‘" },
            { name: "å¤©æ³½é‚¨æš‚å­˜ç‚¹", center: [114.003, 22.4651], district: "å…ƒæœ—åŒº", total: 116, pending: 8, rate: 93.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ³½é‚¨" },
            { name: "å¤©æ™´é‚¨æš‚å­˜ç‚¹", center: [114.008, 22.4605], district: "å…ƒæœ—åŒº", total: 124, pending: 9, rate: 92.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ™´é‚¨" },
            { name: "å˜‰æ¹–å±±åº„5æœŸ-ä¸½æ¹–å±…", center: [114.009, 22.4576], district: "å…ƒæœ—åŒº", total: 83, pending: 4, rate: 95.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„5æœŸä¸½æ¹–å±…" },
            { name: "å˜‰æ¹–å±±åº„6æœŸ-ç¾æ¹–å±…", center: [114.011, 22.4585], district: "å…ƒæœ—åŒº", total: 89, pending: 5, rate: 94.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„6æœŸç¾æ¹–å±…" },
            { name: "å˜‰æ¹–å±±åº„7æœŸ-æ™¯æ¹–å±…", center: [114.012, 22.4566], district: "å…ƒæœ—åŒº", total: 92, pending: 6, rate: 93.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„7æœŸæ™¯æ¹–å±…" },
            { name: "å¤©æ©é‚¨æš‚å­˜ç‚¹", center: [114.001, 22.4608], district: "å…ƒæœ—åŒº", total: 108, pending: 9, rate: 91.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ©é‚¨" },
            { name: "å¤©æ…ˆé‚¨å¸è´§ç‚¹", center: [114.013, 22.45], district: "å…ƒæœ—åŒº", total: 123, pending: 9, rate: 92.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ…ˆé‚¨" },
            { name: "å¤©æ†æ‘æš‚å­˜ç‚¹", center: [114.005, 22.468], district: "å…ƒæœ—åŒº", total: 110, pending: 2, rate: 98.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©æ†æ‘" },
            { name: "å¤©é€¸æ‘æš‚å­˜ç‚¹", center: [114.005, 22.4639], district: "å…ƒæœ—åŒº", total: 137, pending: 7, rate: 94.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©é€¸æ‘" },
            { name: "å¤©åé‚¨æš‚å­˜ç‚¹", center: [114.001, 22.4586], district: "å…ƒæœ—åŒº", total: 107, pending: 6, rate: 94.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©åé‚¨" },
            { name: "å¤©ç››è‹‘æš‚å­˜ç‚¹", center: [114.006, 22.4456], district: "å…ƒæœ—åŒº", total: 128, pending: 4, rate: 96.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©ç››è‹‘" },
            { name: "å±æ¬£è‹‘æš‚å­˜ç‚¹", center: [114.008, 22.4427], district: "å…ƒæœ—åŒº", total: 135, pending: 6, rate: 95.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå±æ¬£è‹‘" },
            { name: "å¤©è€€é‚¨å¸è´§ç‚¹2", center: [114.009, 22.4496], district: "å…ƒæœ—åŒº", total: 125, pending: 8, rate: 93.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©è€€é‚¨" },
            { name: "å¤©è€€é‚¨å¸è´§ç‚¹3", center: [114.01, 22.45], district: "å…ƒæœ—åŒº", total: 130, pending: 12, rate: 90.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©è€€é‚¨" },
            { name: "æœ—å±é‚¨-1", center: [114.029, 22.4484], district: "å…ƒæœ—åŒº", total: 107, pending: 4, rate: 96.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæœ—å±é‚¨" },
            { name: "æ´ªç¦é‚¨", center: [114.003, 22.4351], district: "å…ƒæœ—åŒº", total: 136, pending: 8, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæ´ªç¦é‚¨" },
            { name: "æ°´è¾¹å›´é‚¨", center: [114.025, 22.4429], district: "å…ƒæœ—åŒº", total: 118, pending: 7, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæ°´è¾¹å›´é‚¨" },
            { name: "é‡‡å¶åº­æš‚å­˜ç‚¹", center: [114.038, 22.448], district: "å…ƒæœ—åŒº", total: 94, pending: 5, rate: 94.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºé‡‡å¶åº­" },
            { name: "ä¸–å®™", center: [114.033, 22.444], district: "å…ƒæœ—åŒº", total: 125, pending: 9, rate: 92.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºä¸–å®™" },
            { name: "ç©—ç¦¾è‹‘new", center: [114.199, 22.3897], district: "æ²™ç”°åŒº", total: 145, pending: 13, rate: 91.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºç©—ç¦¾è‹‘" },
            { name: "å¾¡é¾™å±±SJ", center: [114.204, 22.3924], district: "æ²™ç”°åŒº", total: 175, pending: 3, rate: 98.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºå¾¡é¾™å±±" },
            { name: "éªæ™¯å›­SJ", center: [114.207, 22.3983], district: "æ²™ç”°åŒº", total: 154, pending: 6, rate: 96.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºéªæ™¯å›­" },
            { name: "éªæ´‹é‚¨SJ", center: [114.195, 22.3967], district: "æ²™ç”°åŒº", total: 175, pending: 9, rate: 94.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºéªæ´‹é‚¨" },
            { name: "é“¶ç¦§èŠ±å›­æš‚å­˜ç‚¹", center: [114.205, 22.3948], district: "æ²™ç”°åŒº", total: 130, pending: 13, rate: 90.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé“¶ç¦§èŠ±å›­" },
            { name: "æ›‰å³°ç£ç•”", center: [114.227, 22.4077], district: "æ²™ç”°åŒº", total: 142, pending: 11, rate: 92.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ›‰å³°ç£ç•”" },
            { name: "åµå²¸", center: [114.228, 22.409], district: "æ²™ç”°åŒº", total: 172, pending: 16, rate: 90.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºåµå²¸" },
            { name: "éŒ¦æ³°è‹‘", center: [114.226, 22.4049], district: "æ²™ç”°åŒº", total: 130, pending: 2, rate: 98.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºéŒ¦æ³°è‹‘" },
            { name: "ç©—ç¦¾è‹‘newï¼ˆå±±ä¸Šï¼‰", center: [114.198, 22.39], district: "æ²™ç”°åŒº", total: 138, pending: 10, rate: 92.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºç©—ç¦¾è‹‘å±±ä¸Š" },
            { name: "éªæ´‹é‚¨SJ2", center: [114.193, 22.3966], district: "æ²™ç”°åŒº", total: 156, pending: 14, rate: 91.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºéªæ´‹é‚¨2æœŸ" },
            { name: "å˜‰æ¹–å±±åº„1æœŸ-ä¹æ¹–å±…", center: [114.005, 22.4495], district: "å…ƒæœ—åŒº", total: 125, pending: 4, rate: 96.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„1æœŸä¹æ¹–å±…" },
            { name: "å˜‰æ¹–å±±åº„2æœŸ-èµæ¹–å±…", center: [114.007, 22.4509], district: "å…ƒæœ—åŒº", total: 102, pending: 4, rate: 96.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„2æœŸèµæ¹–å±…" },
            { name: "å˜‰æ¹–å±±åº„3æœŸ-ç¿ æ¹–å±…", center: [114.005, 22.4554], district: "å…ƒæœ—åŒº", total: 147, pending: 11, rate: 92.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå˜‰æ¹–å±±åº„3æœŸç¿ æ¹–å±…" },
            { name: "æ†å®‰é‚¨", center: [114.234, 22.4148], district: "æ²™ç”°åŒº", total: 177, pending: 15, rate: 91.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ†å®‰é‚¨" },
            { name: "è€€å®‰é‚¨", center: [114.236, 22.4179], district: "æ²™ç”°åŒº", total: 131, pending: 9, rate: 93.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºè€€å®‰é‚¨" },
            { name: "æ¬£å®‰é‚¨", center: [114.23, 22.4113], district: "æ²™ç”°åŒº", total: 142, pending: 6, rate: 95.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ¬£å®‰é‚¨" },
            { name: "æœ—å±é‚¨-2", center: [114.03, 22.4467], district: "å…ƒæœ—åŒº", total: 98, pending: 9, rate: 90.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæœ—å±é‚¨2æœŸ" },
            { name: "æœ—å±é‚¨-3", center: [114.028, 22.4462], district: "å…ƒæœ—åŒº", total: 105, pending: 7, rate: 93.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæœ—å±é‚¨3æœŸ" },
            { name: "é›…å…¸å±…æš‚å­˜ç‚¹", center: [114.24, 22.4233], district: "æ²™ç”°åŒº", total: 139, pending: 2, rate: 98.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé›…å…¸å±…" },
            { name: "æ–°æ¸¯åŸ-ä¸€äºŒä¸‰äº”æœŸæš‚å­˜ç‚¹", center: [114.238, 22.4208], district: "æ²™ç”°åŒº", total: 142, pending: 4, rate: 97.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ–°æ¸¯åŸä¸€äºŒä¸‰äº”æœŸ" },
            { name: "æ–°æ¸¯åŸ-å››æœŸæš‚å­˜ç‚¹", center: [114.236, 22.4208], district: "æ²™ç”°åŒº", total: 135, pending: 6, rate: 95.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ–°æ¸¯åŸå››æœŸ" },
            { name: "æµ·æŸèŠ±å›­æš‚å­˜ç‚¹", center: [114.236, 22.4223], district: "æ²™ç”°åŒº", total: 165, pending: 15, rate: 90.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæµ·æŸèŠ±å›­" },
            { name: "The Henleyæš‚å­˜ç‚¹", center: [114.203, 22.324], district: "ä¹é¾™åŸåŒº", total: 100, pending: 6, rate: 94.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºThe Henley" },
            { name: "Monaco Oneæš‚å­˜ç‚¹", center: [114.204, 22.324], district: "ä¹é¾™åŸåŒº", total: 94, pending: 7, rate: 92.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºMonaco One" },
            { name: "Monacoæš‚å­˜ç‚¹", center: [114.205, 22.3244], district: "ä¹é¾™åŸåŒº", total: 63, pending: 5, rate: 92.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºMonaco" },
            { name: "å˜‰å³°æ±‡æš‚å­˜ç‚¹", center: [114.204, 22.3241], district: "ä¹é¾™åŸåŒº", total: 88, pending: 4, rate: 95.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå˜‰å³°æ±‡" },
            { name: "å°šï¼ç’æº‹æš‚å­˜ç‚¹", center: [114.204, 22.3246], district: "ä¹é¾™åŸåŒº", total: 119, pending: 10, rate: 91.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå°šï¼ç’æº‹" },
            { name: "Henley Parkæš‚å­˜ç‚¹", center: [114.204, 22.3235], district: "ä¹é¾™åŸåŒº", total: 105, pending: 8, rate: 92.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºHenley Park" },
            { name: "Grand YOHOæš‚å­˜ç‚¹", center: [114.042, 22.4426], district: "å…ƒæœ—åŒº", total: 145, pending: 11, rate: 92.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºGrand YOHO" },
            { name: "æœ—å±8å·æš‚å­˜ç‚¹", center: [114.032, 22.4458], district: "å…ƒæœ—åŒº", total: 85, pending: 6, rate: 92.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºæœ—å±8å·" },
            { name: "Wetland Seasons Bayæš‚å­˜ç‚¹", center: [114.008, 22.4682], district: "å…ƒæœ—åŒº", total: 106, pending: 9, rate: 91.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºWetland Seasons Bay" },
            { name: "Wetland Seasons Park-æš‚å­˜ç‚¹1", center: [114.009, 22.4646], district: "å…ƒæœ—åŒº", total: 121, pending: 5, rate: 95.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºWetland Seasons Park" },
            { name: "Wetland Seasons Park-æš‚å­˜ç‚¹2", center: [114.011, 22.4643], district: "å…ƒæœ—åŒº", total: 118, pending: 7, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºWetland Seasons Park" },
            { name: "Yoho Westæš‚å­˜ç‚¹", center: [114.007, 22.4568], district: "å…ƒæœ—åŒº", total: 132, pending: 8, rate: 93.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºYoho West" },
            { name: "å¤©ä¸½è‹‘æš‚å­˜ç‚¹", center: [114.013, 22.4506], district: "å…ƒæœ—åŒº", total: 89, pending: 1, rate: 98.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå…ƒæœ—åŒºå¤©ä¸½è‹‘" },
            { name: "éŒ¦éè‹‘æš‚å­˜ç‚¹", center: [114.232, 22.4135], district: "æ²™ç”°åŒº", total: 123, pending: 7, rate: 94.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºéŒ¦éè‹‘" },
            { name: "é”¦ç¦§è‹‘æš‚å­˜ç‚¹", center: [114.235, 22.4181], district: "æ²™ç”°åŒº", total: 150, pending: 13, rate: 91.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé”¦ç¦§è‹‘" },
            { name: "é”¦éªè‹‘æš‚å­˜ç‚¹", center: [114.229, 22.406], district: "æ²™ç”°åŒº", total: 170, pending: 17, rate: 90.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé”¦éªè‹‘" },
            { name: "é©¬éå±±ä¸­å¿ƒæš‚å­˜ç‚¹", center: [114.237, 22.4226], district: "æ²™ç”°åŒº", total: 179, pending: 7, rate: 96.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé©¬éå±±ä¸­å¿ƒ" },
            { name: "å¯å¾·1å·æš‚å­˜ç‚¹", center: [114.205, 22.3273], district: "ä¹é¾™åŸåŒº", total: 78, pending: 6, rate: 92.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¯å¾·1å·" },
            { name: "é¾™èª‰æš‚å­˜ç‚¹", center: [114.206, 22.3251], district: "ä¹é¾™åŸåŒº", total: 116, pending: 8, rate: 93.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºé¾™èª‰" },
            { name: "å˜‰æ±‡æš‚å­˜ç‚¹", center: [114.206, 22.3258], district: "ä¹é¾™åŸåŒº", total: 67, pending: 6, rate: 91.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå˜‰æ±‡" },
            { name: "å¤©å¯°æš‚å­˜ç‚¹", center: [114.207, 22.3258], district: "ä¹é¾™åŸåŒº", total: 68, pending: 4, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¤©å¯°" },
            { name: "Oasis Kai Takæš‚å­˜ç‚¹", center: [114.205, 22.3261], district: "ä¹é¾™åŸåŒº", total: 92, pending: 5, rate: 94.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºOasis Kai Tak" },
            { name: "ä¸°ç››è‹‘æš‚å­˜ç‚¹", center: [114.193, 22.3685], district: "æ²™ç”°åŒº", total: 176, pending: 9, rate: 94.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºä¸°ç››è‹‘" },
            { name: "æ–°ç”°å›´é‚¨æš‚å­˜ç‚¹", center: [114.191, 22.3677], district: "æ²™ç”°åŒº", total: 155, pending: 1, rate: 99.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ–°ç”°å›´é‚¨" },
            { name: "æ–°ç¿ é‚¨-æš‚å­˜ç‚¹1", center: [114.187, 22.3686], district: "æ²™ç”°åŒº", total: 140, pending: 8, rate: 94.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ–°ç¿ é‚¨" },
            { name: "æ–°ç¿ é‚¨-æš‚å­˜ç‚¹2", center: [114.188, 22.3663], district: "æ²™ç”°åŒº", total: 142, pending: 10, rate: 93.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ–°ç¿ é‚¨" },
            { name: "ç§¦çŸ³é‚¨æš‚å­˜ç‚¹", center: [114.191, 22.371], district: "æ²™ç”°åŒº", total: 141, pending: 8, rate: 94.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºç§¦çŸ³é‚¨" },
            { name: "Miami Quayæš‚å­˜ç‚¹", center: [114.213, 22.3099], district: "ä¹é¾™åŸåŒº", total: 95, pending: 6, rate: 93.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºMiami Quay" },
            { name: "ç»´æ¸¯1å·æš‚å­˜ç‚¹", center: [114.212, 22.3104], district: "ä¹é¾™åŸåŒº", total: 81, pending: 3, rate: 96.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºç»´æ¸¯1å·" },
            { name: "å¯å¾·æµ·æ¹¾æš‚å­˜ç‚¹", center: [114.209, 22.3127], district: "ä¹é¾™åŸåŒº", total: 90, pending: 4, rate: 95.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¯å¾·æµ·æ¹¾" },
            { name: "å¤©çºï¼å¤©æš‚å­˜ç‚¹", center: [114.204, 22.3294], district: "ä¹é¾™åŸåŒº", total: 85, pending: 5, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¤©çºï¼å¤©" },
            { name: "ç»´æ¸¯ï¼åŒé’»æš‚å­˜ç‚¹", center: [114.208, 22.3136], district: "ä¹é¾™åŸåŒº", total: 88, pending: 7, rate: 92.0, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºç»´æ¸¯ï¼åŒé’»" },
            { name: "å¯æ‚¦è‹‘æš‚å­˜ç‚¹", center: [114.197, 22.3228], district: "ä¹é¾™åŸåŒº", total: 76, pending: 5, rate: 93.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¯æ‚¦è‹‘" },
            { name: "å¯æ¬£è‹‘æš‚å­˜ç‚¹", center: [114.199, 22.3248], district: "ä¹é¾™åŸåŒº", total: 74, pending: 4, rate: 94.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºä¹é¾™åŸåŒºå¯æ¬£è‹‘" },
            { name: "å¸æ¶›æ¹¾æµªç´è½©æš‚å­˜ç‚¹", center: [114.019, 22.3644], district: "å±¯é—¨åŒº", total: 183, pending: 17, rate: 90.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå¸æ¶›æ¹¾æµªç´è½©" },
            { name: "å¸æ¶›æ¹¾æµ·ç´è½©æš‚å­˜ç‚¹", center: [114.019, 22.3657], district: "å±¯é—¨åŒº", total: 121, pending: 10, rate: 91.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå¸æ¶›æ¹¾æµ·ç´è½©" },
            { name: "å¸å¾¡æš‚å­˜ç‚¹", center: [113.996, 22.3712], district: "å±¯é—¨åŒº", total: 195, pending: 5, rate: 97.4, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå¸å¾¡" },
            { name: "é£æ‰¬æš‚å­˜ç‚¹", center: [114.005, 22.3659], district: "å±¯é—¨åŒº", total: 142, pending: 9, rate: 93.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºé£æ‰¬" },
            { name: "å½©ç¦¾è‹‘æš‚å­˜ç‚¹", center: [114.193, 22.3948], district: "æ²™ç”°åŒº", total: 135, pending: 8, rate: 94.1, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºå½©ç¦¾è‹‘" },
            { name: "æ»¡åå±±-æš‚å­˜ç‚¹2", center: [113.995, 22.3741], district: "å±¯é—¨åŒº", total: 110, pending: 9, rate: 91.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºæ»¡åå±±" },
            { name: "æ»¡åå±±-æš‚å­˜ç‚¹1", center: [113.993, 22.3744], district: "å±¯é—¨åŒº", total: 190, pending: 14, rate: 92.6, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºæ»¡åå±±" },
            { name: "ç¼‡å²¸-æš‚å­˜ç‚¹2", center: [114.006, 22.3693], district: "å±¯é—¨åŒº", total: 105, pending: 6, rate: 94.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºç¼‡å²¸" },
            { name: "ç¼‡å²¸-æš‚å­˜ç‚¹1", center: [114.005, 22.37], district: "å±¯é—¨åŒº", total: 107, pending: 5, rate: 95.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºç¼‡å²¸" },
            { name: "ä¸Šæº-æš‚å­˜ç‚¹2", center: [114.009, 22.3699], district: "å±¯é—¨åŒº", total: 98, pending: 7, rate: 92.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºä¸Šæº" },
            { name: "ä¸Šæº-æš‚å­˜ç‚¹1", center: [114.009, 22.3699], district: "å±¯é—¨åŒº", total: 96, pending: 6, rate: 93.8, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºä¸Šæº" },
            { name: "å‡¯å’Œå±±æš‚å­˜ç‚¹", center: [114.006, 22.3708], district: "å±¯é—¨åŒº", total: 165, pending: 14, rate: 91.5, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå±¯é—¨åŒºå‡¯å’Œå±±" },
            { name: "èŸæœ—æš‚å­˜ç‚¹", center: [114.239, 22.4222], district: "æ²™ç”°åŒº", total: 125, pending: 6, rate: 95.2, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºèŸæœ—" },
            { name: "é‡‘ç‹®èŠ±å›­1æœŸæš‚å­˜ç‚¹", center: [114.189, 22.3666], district: "æ²™ç”°åŒº", total: 149, pending: 13, rate: 91.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé‡‘ç‹®èŠ±å›­1æœŸ" },
            { name: "é‡‘ç‹®èŠ±å›­2æœŸæš‚å­˜ç‚¹", center: [114.187, 22.3649], district: "æ²™ç”°åŒº", total: 165, pending: 16, rate: 90.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºé‡‘ç‹®èŠ±å›­2æœŸ" },
            { name: "æ°´æ³‰æ¾³é‚¨-æš‚å­˜ç‚¹1", center: [114.203, 22.3714], district: "æ²™ç”°åŒº", total: 178, pending: 3, rate: 98.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ°´æ³‰æ¾³é‚¨" },
            { name: "æ°´æ³‰æ¾³é‚¨-æš‚å­˜ç‚¹2", center: [114.203, 22.3703], district: "æ²™ç”°åŒº", total: 148, pending: 1, rate: 99.3, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ°´æ³‰æ¾³é‚¨" },
            { name: "æ°´æ³‰æ¾³é‚¨-æš‚å­˜ç‚¹3", center: [114.204, 22.3694], district: "æ²™ç”°åŒº", total: 162, pending: 5, rate: 96.9, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ°´æ³‰æ¾³é‚¨" },
            { name: "æ°´æ³‰æ¾³é‚¨-æš‚å­˜ç‚¹4", center: [114.202, 22.3695], district: "æ²™ç”°åŒº", total: 172, pending: 4, rate: 97.7, address: "é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºæ²™ç”°åŒºæ°´æ³‰æ¾³é‚¨" }
        ];

        var districtDataMap = {};
        districts.forEach(function(district) {
            districtDataMap[district.name] = district;
        });

        var estateDataMap = {};
        estates.forEach(function(estate) {
            estateDataMap[estate.name] = estate;
        });
        
        function showErrorMessage(title, detail) {
            var errorHtml = `
                <div class="error-message">
                    <div class="error-title">${title}</div>
                    <div class="error-detail">${detail}</div>
                    <button class="error-btn" onclick="window.location.reload()">é‡æ–°åŠ è½½</button>
                </div>
            `;
            $('#map-container').html(errorHtml);
        }
        
        function initMap() {
            myChart.showLoading();
            $.ajax({
                url: './data/hongkong.json', 
                dataType: 'json',
                success: function(hkJson) {
                    myChart.hideLoading();
                    console.log('é¦™æ¸¯åœ°å›¾åŠ è½½æˆåŠŸï¼ŒåŒ…å«åŒºåŸŸæ•°:', hkJson.features.length);
                    echarts.registerMap('HK', hkJson);
                    var option = {
                        backgroundColor: '#ffffff',
                        tooltip: {
                            trigger: 'item',
                            formatter: function(params) {
                                if (params.seriesName === 'åŒºè¾¹ç•Œ') {
                                    var district = districtDataMap[params.name];
                                    if (!district) return params.name;
                                    return `
                                        <div style="font-weight:bold; margin-bottom:8px; color:${district.color}">${district.name}</div>
                                        <div style="margin-bottom:6px;">ğŸ“Š æ€»å•é‡: ${district.total}</div>
                                        <div>â³ å¾…æ´¾é€: ${district.pending}</div>
                                        <div>âœ… ç­¾æ”¶ç‡: ${district.rate}%</div>
                                        <div style="margin-top:8px; color:#888;">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                                    `;
                                } else if (params.seriesName === 'å°åŒºä½ç½®') {
                                    var estate = estateDataMap[params.data.name];
                                    if (!estate) return params.name;
                                    return `
                                        <div style="font-weight:bold; margin-bottom:8px;">${estate.name}</div>
                                        <div style="margin-bottom:6px;">ğŸ“Œ ${estate.address}</div>
                                        <div style="margin-bottom:4px;">ğŸ˜ï¸ æ‰€å±åŒºåŸŸ: ${estate.district}</div>
                                        <div>ğŸ“Š æ€»å•é‡: ${estate.total}</div>
                                        <div>â³ å¾…æ´¾é€: ${estate.pending}</div>
                                        <div>âœ… ç­¾æ”¶ç‡: ${estate.rate}%</div>
                                        <div style="margin-top:8px; color:#888;">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                                    `;
                                }
                                return params.name;
                            }
                        },
                        geo: {
                            map: 'HK',
                            roam: true,
                            zoom: initialZoom,
                            center: initialCenter,
                            label: {
                                show: true,
                                color: '#555',
                                fontSize: 10
                            },
                            itemStyle: {
                                areaColor: '#f0f5ff',
                                borderColor: '#999',
                                borderWidth: 1,
                                borderType: 'solid'
                            },
                            emphasis: {
                                itemStyle: {
                                    areaColor: '#e0eeff',
                                    borderColor: '#666',
                                    borderWidth: 2
                                }
                            },
                            select: {
                                itemStyle: {
                                    areaColor: 'rgba(77, 144, 254, 0.1)',
                                    borderColor: '#4d90fe',
                                    borderWidth: 2
                                }
                            }
                        },
                        series: [
                            {
                                name: 'åŒºè¾¹ç•Œ',
                                type: 'map',
                                map: 'HK',
                                coordinateSystem: 'geo',
                                geoIndex: 0,
                                zlevel: 1,
                                data: districts.map(d => ({
                                    name: d.name,
                                    value: d.total,
                                    itemStyle: {
                                        areaColor: d.color + '20' 
                                    }
                                })),
                                itemStyle: {
                                    borderColor: '#666',
                                    borderWidth: 1,
                                    areaColor: 'transparent'
                                },
                                emphasis: {
                                    itemStyle: {
                                        areaColor: 'rgba(100, 100, 100, 0.1)',
                                        borderColor: '#4d90fe',
                                        borderWidth: 2
                                    }
                                },
                                select: {
                                    itemStyle: {
                                        areaColor: 'rgba(77, 144, 254, 0.1)',
                                        borderColor: '#4d90fe',
                                        borderWidth: 2
                                    }
                                },
                                label: {
                                    show: true,
                                    color: '#333',
                                    fontSize: 10,
                                    fontWeight: 'bold'
                                }
                            },
                            {
                                name: 'å°åŒºä½ç½®',
                                type: 'scatter',
                                coordinateSystem: 'geo',
                                geoIndex: 0,
                                zlevel: 3,
                                symbol: 'circle',
                                symbolSize: function(val) {
                                    return Math.max(15, Math.min(30, val[2] / 5)); 
                                },
                                data: estates.map(function(estate) {
                                    return {
                                        name: estate.name,
                                        value: [estate.center[0], estate.center[1], estate.total],
                                        estate: estate
                                    };
                                }),
                                itemStyle: {
                                    color: '#ff6b6b',
                                    borderColor: '#ff4444',
                                    borderWidth: 2,
                                    shadowColor: 'rgba(255, 107, 107, 0.5)',
                                    shadowBlur: 10
                                },
                                emphasis: {
                                    itemStyle: {
                                        color: '#ff4444',
                                        borderColor: '#ff0000',
                                        borderWidth: 3,
                                        shadowColor: 'rgba(255, 68, 68, 0.7)',
                                        shadowBlur: 15
                                    },
                                    label: {
                                        show: true,
                                        position: 'top',
                                        formatter: '{b}',
                                        color: '#fff',
                                        backgroundColor: '#ff4444',
                                        padding: [4, 8],
                                        borderRadius: 4
                                    }
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: '{b}',
                                    color: '#fff',
                                    fontSize: 10,
                                    backgroundColor: 'rgba(255, 107, 107, 0.8)',
                                    padding: [3, 6],
                                    borderRadius: 3
                                }
                            }
                        ]
                    };
                    
                    myChart.setOption(option);
                    bindEvents();
                    
                },
                error: function(xhr, status, error) {
                    myChart.hideLoading();
                    console.error('åœ°å›¾æ•°æ®åŠ è½½å¤±è´¥:', error);
                    var errorMessage = '';
                    if (xhr.status === 404) {
                        errorMessage = 'åœ°å›¾æ–‡ä»¶æœªæ‰¾åˆ°ã€‚è¯·ç¡®ä¿å·²å°† hongkong.json æ–‡ä»¶ä¸‹è½½å¹¶æ”¾ç½®åœ¨ data æ–‡ä»¶å¤¹ä¸­ã€‚';
                    } else if (xhr.status === 0) {
                        errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥æˆ–æ–‡ä»¶è®¿é—®è¢«æ‹’ç»ã€‚å¦‚æœç›´æ¥ä»æ–‡ä»¶ç³»ç»Ÿæ‰“å¼€ï¼Œè¯·ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨è¿è¡Œï¼ˆå¦‚ä½¿ç”¨ VS Code Live Serverï¼‰ã€‚';
                    } else {
                        errorMessage = 'åœ°å›¾æ•°æ®åŠ è½½å¤±è´¥: ' + error;
                    }
                    
                    showErrorMessage('åœ°å›¾åŠ è½½å¤±è´¥', errorMessage);
                    try {
                        renderSimpleMap();
                    } catch (e) {
                        console.error('ç®€å•åœ°å›¾ä¹ŸåŠ è½½å¤±è´¥:', e);
                    }
                }
            });
        }
        
        function renderSimpleMap() {
            console.log('ä½¿ç”¨ç®€å•åœ°å›¾ä½œä¸ºåå¤‡æ–¹æ¡ˆ');
            var simpleHkGeo = {
                type: "FeatureCollection",
                features: [
                    {
                        type: "Feature",
                        properties: { name: "é¦™æ¸¯" },
                        geometry: {
                            type: "Polygon",
                            coordinates: [[
                                [113.8, 22.1], [114.4, 22.1], [114.4, 22.6], [113.8, 22.6], [113.8, 22.1]
                            ]]
                        }
                    }
                ]
            };
            
            try {
                echarts.registerMap('HK_Simple', simpleHkGeo);
                
                var option = {
                    backgroundColor: '#ffffff',
                    geo: {
                        map: 'HK_Simple',
                        roam: true,
                        zoom: 6,
                        center: [114.1, 22.35],
                        itemStyle: {
                            areaColor: '#f0f5ff',
                            borderColor: '#999',
                            borderWidth: 1
                        }
                    },
                    series: [
                        {
                            name: 'å°åŒºä½ç½®',
                            type: 'scatter',
                            coordinateSystem: 'geo',
                            data: estates.map(function(estate) {
                                return {
                                    name: estate.name,
                                    value: [estate.center[0], estate.center[1], estate.total]
                                };
                            }),
                            symbolSize: 20,
                            itemStyle: {
                                color: '#ff6b6b',
                                borderColor: '#ff4444',
                                borderWidth: 2
                            }
                        }
                    ]
                };
                
                myChart.setOption(option);
                bindEvents();
                
                console.log('ç®€å•åœ°å›¾åŠ è½½æˆåŠŸ');
            } catch (error) {
                console.error('ç®€å•åœ°å›¾åŠ è½½å¤±è´¥:', error);
                showErrorMessage('åœ°å›¾åˆå§‹åŒ–å¤±è´¥', 'æ— æ³•åŠ è½½ä»»ä½•åœ°å›¾æ•°æ®ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ã€‚');
            }
        }
        
        function bindEvents() {
            // æ¸…é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
            myChart.off('click');
            myChart.off('dblclick');
            
            // ç‚¹å‡»äº‹ä»¶
            myChart.on('click', function(params) {
                console.log('ç‚¹å‡»äº‹ä»¶è§¦å‘:', params);
                
                if (!params) return;
                
                if (params.seriesName === 'åŒºè¾¹ç•Œ') {
                    // ç‚¹å‡»åŒºè¾¹ç•Œ
                    var districtName = params.name;
                    console.log('ç‚¹å‡»åŒº:', districtName);
                    
                    if (selectedItem === districtName && selectedType === 'district') {
                        closeModal();
                    } else {
                        showDistrictDetail(districtName);
                    }
                } else if (params.seriesName === 'å°åŒºä½ç½®' && params.data) {
                    // ç‚¹å‡»å°åŒº
                    var estateName = params.data.name;
                    console.log('ç‚¹å‡»å°åŒº:', estateName);
                    
                    if (selectedItem === estateName && selectedType === 'estate') {
                        closeModal();
                    } else {
                        showEstateDetail(estateName);
                    }
                }
            });
            
            // åŒå‡»äº‹ä»¶ - æ”¾å¤§
            myChart.on('dblclick', function(params) {
                if (params) {
                    currentZoom = Math.min(currentZoom * 1.3, 15);
                    myChart.setOption({
                        geo: { zoom: currentZoom }
                    });
                }
            });
            
            // åœ°å›¾ç¼©æ”¾äº‹ä»¶
            myChart.on('georoam', function(params) {
                if (params.zoom) {
                    currentZoom = params.zoom;
                }
            });
        }

        // æ˜¾ç¤ºåŒºè¯¦æƒ…
        function showDistrictDetail(districtName) {
            var district = districtDataMap[districtName];
            if (!district) return;
            
            selectedItem = districtName;
            selectedType = 'district';
            
            // è·å–è¯¥åŒºåŸŸçš„æ‰€æœ‰å°åŒº
            var districtEstates = estates.filter(estate => estate.district === districtName);
            
            // æ›´æ–°å¼¹çª—å†…å®¹
            $('#modal-title').text(district.name + " - åŒºåŸŸæ¦‚è§ˆ");
            $('#modal-address').text("é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº " + district.name);
            $('#val-total').text(district.total);
            $('#val-pending').text(district.pending);
            $('#val-rate').text(district.rate + "%");
            
            // ç”Ÿæˆå°åŒºåˆ—è¡¨
            var html = '';
            
            if (districtEstates.length > 0) {
                districtEstates.forEach(function(estate, index) {
                    var pendingRate = Math.round((estate.pending / estate.total) * 100);
                    var statusHtml = estate.pending > 0 ? 
                        '<span class="tag tag-pending">' + pendingRate + '%å¾…æ´¾</span>' : 
                        '<span class="tag tag-done">å·²å®Œæˆ</span>';
                    
                    html += `<tr>
                        <td><strong>${estate.name}</strong></td>
                        <td>${estate.total}</td>
                        <td>${estate.pending}</td>
                        <td>${statusHtml}</td>
                    </tr>`;
                });
                
                // æ›´æ–°è¡¨æ ¼æ ‡é¢˜
                $('.info-card-title').text("åŒºåŸŸå°åŒºåˆ—è¡¨ (" + districtEstates.length + "ä¸ª)");
                
                // æ›´æ–°è¡¨æ ¼ç»“æ„
                $('#modal-body').html(html);
                $('#modal-body').closest('table').find('thead').html(`
                    <tr>
                        <th>å°åŒºåç§°</th>
                        <th>æ€»å•é‡</th>
                        <th>å¾…æ´¾é€</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                `);
            } else {
                html = `<tr><td colspan="4" style="text-align:center; padding:30px; color:#999;">æš‚æ— å°åŒºæ•°æ®</td></tr>`;
                $('#modal-body').html(html);
            }
            
            // æ˜¾ç¤ºå¼¹çª—
            $('#data-modal').show();
            
            console.log('æ˜¾ç¤ºåŒºè¯¦æƒ…:', districtName);
        }

        // æ˜¾ç¤ºå°åŒºè¯¦æƒ…
        function showEstateDetail(estateName) {
            var estate = estateDataMap[estateName];
            if (!estate) return;
            
            selectedItem = estateName;
            selectedType = 'estate';
            
            // æ›´æ–°å¼¹çª—å†…å®¹
            $('#modal-title').text(estate.name);
            $('#modal-address').text(estate.address + " (" + estate.district + ")");
            $('#val-total').text(estate.total);
            $('#val-pending').text(estate.pending);
            $('#val-rate').text(estate.rate + "%");
            
            // ç”Ÿæˆè®¢å•æ•°æ®
            var html = '';
            var orderCount = Math.min(estate.total, 8);
            
            for (var i = 1; i <= orderCount; i++) {
                var isPending = i <= estate.pending;
                var statusHtml = isPending ? 
                    '<span class="tag tag-pending">æ´¾é€ä¸­</span>' : 
                    '<span class="tag tag-done">å·²æ´¾å®Œ</span>';
                
                var orderNum = 'HK' + (estate.total * 100 + i).toString().padStart(6, '0');
                var recipients = ['å¼ XX', 'æXX', 'ç‹XX', 'é™ˆXX', 'åˆ˜XX', 'é»„XX', 'æ—XX', 'ä½•XX'];
                var recipient = recipients[(i - 1) % recipients.length];
                
                html += `<tr>
                    <td style="font-family: monospace;">${orderNum}</td>
                    <td>${recipient}</td>
                    <td>${statusHtml}</td>
                </tr>`;
            }
            
            $('#modal-body').html(html);
            
            // æ¢å¤è¡¨æ ¼æ ‡é¢˜
            $('.info-card-title').text("ä»Šæ—¥æ´¾é€è¯¦æƒ…");
            $('#modal-body').closest('table').find('thead').html(`
                <tr>
                    <th>å•å·</th>
                    <th>æ”¶ä»¶äºº</th>
                    <th>çŠ¶æ€</th>
                </tr>
            `);
            
            // æ˜¾ç¤ºå¼¹çª—
            $('#data-modal').show();
            
            console.log('æ˜¾ç¤ºå°åŒºè¯¦æƒ…:', estateName);
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            $('#data-modal').hide();
            selectedItem = null;
            selectedType = null;
        }

        // ç¼©æ”¾æ§åˆ¶
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 20);
            myChart.setOption({
                geo: { zoom: currentZoom }
            });
        }
        
        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 1);
            myChart.setOption({
                geo: { zoom: currentZoom }
            });
        }
        
        function resetZoom() {
            currentZoom = initialZoom;
            myChart.setOption({
                geo: { 
                    center: initialCenter,
                    zoom: currentZoom 
                }
            });
        }

        // å›¾å±‚æ§åˆ¶
        function toggleDistrictLayer() {
            var show = document.getElementById('district-toggle').checked;
            myChart.setOption({
                series: [{
                    itemStyle: {
                        borderColor: show ? '#666' : 'transparent',
                        borderWidth: show ? 1 : 0
                    },
                    label: {
                        show: show
                    }
                }]
            });
        }
        
        function toggleEstateLayer() {
            var show = document.getElementById('estate-toggle').checked;
            // æ§åˆ¶æ•£ç‚¹å›¾çš„æ˜¾ç¤º
            myChart.setOption({
                series: [
                    {
                        name: 'å°åŒºä½ç½®',
                        itemStyle: {
                            color: show ? '#ff6b6b' : 'transparent',
                            borderColor: show ? '#ff4444' : 'transparent',
                            borderWidth: show ? 2 : 0
                        },
                        label: {
                            show: show
                        }
                    }
                ]
            });
        }

        function toggleLabels() {
            var show = document.getElementById('label-toggle').checked;
            myChart.setOption({
                series: [
                    {
                        name: 'åŒºè¾¹ç•Œ',
                        label: {
                            show: show
                        }
                    },
                    {
                        name: 'å°åŒºä½ç½®',
                        label: {
                            show: show
                        }
                    }
                ]
            });
        }
        
        // ==============================================
        // æ–°å¢çš„ä¸‰ä¸ªæŒ‰é’®åŠŸèƒ½ä»£ç å¼€å§‹
        // ==============================================
        
        // è½¦é˜Ÿæ•°æ®ï¼ˆåŸºäºExcelæ ·æœ¬ï¼‰
        var teamData = [
            {
                name: "æ²™ç”°Yé˜Ÿ",
                area: "æ²™ç”°åŒº",
                workers: 7,
                efficiency: 105.57,
                total: 828,
                delivered: 719,
                pending: 109,
                rate: 86.8,
                estates: ["éŒ¦éè‹‘", "é‡‘ç‹®èŠ±å›­1æœŸ", "æ–°æ¸¯åŸ", "é”¦éªè‹‘", "é”¦ç¦§è‹‘", "èŠ±å›­åŸ", "æ–°ç¿ é‚¨", "èŸæœ—", "æ°´æ³‰æ¾³é‚¨", "ç§¦çŸ³é‚¨", "æµ·æŸèŠ±å›­", "é›…å…¸å±…", "æ²³ç•”èŠ±å›­", "ç¿ åèŠ±å›­", "é©¬éå±±ä¸­å¿ƒ", "é‡‘ç‹®èŠ±å›­2æœŸ"]
            },
            {
                name: "æ²™ç”°Lé˜Ÿ",
                area: "æ²™ç”°åŒº",
                workers: 7,
                efficiency: 131.86,
                total: 923,
                delivered: 886,
                pending: 37,
                rate: 95.99,
                estates: ["å¾¡é¾™å±±SJ", "æ†å®‰é‚¨", "ç©—ç¦¾è‹‘", "éªæ´‹é‚¨", "éŒ¦æ³°è‹‘", "æ¬£å®‰é‚¨", "é“¶ç¦§èŠ±å›­", "è€€å®‰é‚¨", "éªæ™¯å›­SJ", "åµå²¸", "æ›‰å³°ç£ç•”"]
            },
            {
                name: "å…ƒæœ—Qé˜Ÿ",
                area: "å…ƒæœ—åŒº",
                workers: 9,
                efficiency: 84.67,
                total: 1001,
                delivered: 256,
                pending: 745,
                rate: 25.57,
                estates: ["æœ—å±é‚¨", "æ–°å…ƒæœ—ä¸­å¿ƒ", "ä¸–å®™", "æœ—å±8å·", "WetlandSeasonsPark", "Yoho West", "YOHO Midtown", "The Yoho Hub", "Grand YOHO", "æ°´è¾¹å›´é‚¨", "é‡‡å¶åº­", "å¤©ä¸½è‹‘"]
            },
            {
                name: "å…ƒæœ—Cé˜Ÿ",
                area: "å…ƒæœ—åŒº",
                workers: 8,
                efficiency: 158.88,
                total: 1336,
                delivered: 1229,
                pending: 107,
                rate: 91.99,
                estates: ["å¤©é€¸æ‘", "å¤©æ©é‚¨", "å¤©æ†æ‘", "å¤©ç››è‹‘", "å¤©åé‚¨", "Wetland Seasons Bay"]
            },
            {
                name: "å…ƒæœ—Lé˜Ÿ",
                area: "å…ƒæœ—åŒº",
                workers: 9,
                efficiency: 163.89,
                total: 1799,
                delivered: 1388,
                pending: 411,
                rate: 77.15,
                estates: ["å˜‰æ¹–å±±åº„", "æ´ªç¦é‚¨", "å¤©æ³½é‚¨", "å±æ¬£è‹‘", "å¤©è€€é‚¨", "å¤©ç¥è‹‘", "å¤©æ…ˆé‚¨"]
            },
            {
                name: "ä¹é¾™Cé˜Ÿ",
                area: "ä¹é¾™åŸåŒº",
                workers: 4,
                efficiency: 121.25,
                total: 624,
                delivered: 371,
                pending: 253,
                rate: 59.46,
                estates: ["The Henley", "ç»´æ¸¯1å·", "å¤©çº", "æŸè”šæ£®", "å¯æ‚¦è‹‘", "å¯æ¬£è‹‘", "å¯å¾·æµ·æ¹¾", "å¯å¾·1å·", "å˜‰å³°æ±‡", "Monaco One", "å°šç’æº‹", "Monaco", "Miami Quay", "é¾™èª‰", "å˜‰æ±‡", "å¤©å¯°", "Oasis Kai Tak", "Henley Park"]
            },
            {
                name: "å±¯é—¨Yé˜Ÿ",
                area: "å±¯é—¨åŒº",
                workers: 5,
                efficiency: 118.2,
                total: 725,
                delivered: 591,
                pending: 134,
                rate: 81.52,
                estates: ["Novo Land", "çˆ±ç´æµ·å²¸", "å’Œç”°é‚¨", "é¦™æ¸¯é»„é‡‘æµ·å²¸", "å¸æ¶›æ¹¾", "é£æ‰¬", "èç”°é‚¨", "ç¼‡å²¸", "ä¸Šæº", "æ»¡åå±±", "æµ·æ™¯èŠ±å›­", "å¸å¾¡", "å‡¯å’Œå±±"]
            }
        ];

        // é…é€çŠ¶æ€æ•°æ®
        var deliveryStatusData = [
            { status: "å·²é€è¾¾", count: 4640, color: "#4caf50" },
            { status: "æ´¾é€ä¸­", count: 876, color: "#2196f3" },
            { status: "å¾…æ´¾é€", count: 1090, color: "#ff9800" },
            { status: "é¦–æ´¾å¤±è´¥", count: 234, color: "#f44336" },
            { status: "å¾…æ½æ”¶", count: 567, color: "#9e9e9e" }
        ];

        // è·å–å½“å‰æ—¶é—´
        function getCurrentTime() {
            var now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' + 
                   now.getMinutes().toString().padStart(2, '0') + ':' + 
                   now.getSeconds().toString().padStart(2, '0');
        }

        // æ˜¾ç¤ºé…é€è¿›åº¦è¯¦æƒ…
        function showDeliveryProgress() {
            closeAllModals();
            
            // æ›´æ–°æ—¶é—´
            $('#progress-time').text(getCurrentTime());
            
            // è®¡ç®—æ€»æ•°
            var totalOrders = teamData.reduce((sum, team) => sum + team.total, 0);
            var totalDelivered = teamData.reduce((sum, team) => sum + team.delivered, 0);
            var totalOngoing = totalOrders - totalDelivered;
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            $('#progress-total').text(totalOrders);
            $('#progress-delivered').text(totalDelivered);
            $('#progress-ongoing').text(totalOngoing);
            
            // ç”Ÿæˆè½¦é˜Ÿæ’åè¡¨æ ¼
            var sortedTeams = [...teamData].sort((a, b) => b.rate - a.rate);
            var progressHtml = '';
            
            sortedTeams.forEach(function(team, index) {
                var progressPercent = Math.round(team.rate);
                var teamClass = '';
                var rankClass = '';
                
                if (team.area.includes('æ²™ç”°')) teamClass = 'team-sha';
                else if (team.area.includes('å…ƒæœ—')) teamClass = 'team-yuen';
                else if (team.area.includes('ä¹é¾™')) teamClass = 'team-kow';
                else if (team.area.includes('å±¯é—¨')) teamClass = 'team-tuen';
                
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                var rankIcon = rankClass ? `<span class="rank-icon ${rankClass}">${index + 1}</span>` : (index + 1);
                
                progressHtml += `<tr>
                    <td>${rankIcon}</td>
                    <td><span class="team-tag ${teamClass}">${team.name}</span></td>
                    <td>${team.total}</td>
                    <td>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>${progressPercent}%</span>
                            <span>${team.delivered}/${team.total}</span>
                        </div>
                    </td>
                </tr>`;
            });
            
            $('#progress-body').html(progressHtml);
            
            // ç”ŸæˆçŠ¶æ€åˆ†å¸ƒ
            var statusHtml = '';
            deliveryStatusData.forEach(function(status) {
                var percent = Math.round((status.count / totalOrders) * 100);
                statusHtml += `
                <div style="margin-bottom: 12px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 6px; align-items: center;">
                        <span style="display: flex; align-items: center;">
                            <span class="status-indicator" style="background-color: ${status.color}"></span>
                            ${status.status}
                        </span>
                        <span style="font-weight: 600;">${status.count} <span style="color: #666; font-weight: normal;">(${percent}%)</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percent}%; background-color: ${status.color}"></div>
                    </div>
                </div>`;
            });
            
            $('#progress-status').html(statusHtml);
            
            // æ˜¾ç¤ºå¼¹çª—
            $('#progress-modal').show();
        }

        // æ˜¾ç¤ºäººæ•ˆæ•°æ®è¯¦æƒ…
        function showEfficiency() {
            closeAllModals();
            
            // æ›´æ–°æ—¶é—´
            $('#efficiency-time').text(getCurrentTime());
            
            // è®¡ç®—æ€»æ•°
            var totalWorkers = teamData.reduce((sum, team) => sum + team.workers, 0);
            var totalOrders = teamData.reduce((sum, team) => sum + team.total, 0);
            var avgEfficiency = (totalOrders / totalWorkers).toFixed(2);
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            $('#efficiency-avg').text(avgEfficiency);
            $('#efficiency-total').text(totalOrders);
            $('#efficiency-workers').text(totalWorkers);
            
            // ç”Ÿæˆè½¦é˜Ÿæ’åè¡¨æ ¼
            var sortedTeams = [...teamData].sort((a, b) => b.efficiency - a.efficiency);
            var efficiencyHtml = '';
            
            sortedTeams.forEach(function(team, index) {
                var teamClass = '';
                var rankClass = '';
                
                if (team.area.includes('æ²™ç”°')) teamClass = 'team-sha';
                else if (team.area.includes('å…ƒæœ—')) teamClass = 'team-yuen';
                else if (team.area.includes('ä¹é¾™')) teamClass = 'team-kow';
                else if (team.area.includes('å±¯é—¨')) teamClass = 'team-tuen';
                
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                var rankIcon = rankClass ? `<span class="rank-icon ${rankClass}">${index + 1}</span>` : (index + 1);
                
                efficiencyHtml += `<tr>
                    <td>${rankIcon}</td>
                    <td><span class="team-tag ${teamClass}">${team.name}</span></td>
                    <td>${team.workers}</td>
                    <td><strong style="color: #4d90fe;">${team.efficiency}</strong></td>
                </tr>`;
            });
            
            $('#efficiency-body').html(efficiencyHtml);
            
            // ç”ŸæˆåŒºåŸŸäººæ•ˆå¯¹æ¯”
            var areaEfficiency = {};
            teamData.forEach(function(team) {
                if (!areaEfficiency[team.area]) {
                    areaEfficiency[team.area] = {
                        totalWorkers: 0,
                        totalOrders: 0,
                        teams: []
                    };
                }
                areaEfficiency[team.area].totalWorkers += team.workers;
                areaEfficiency[team.area].totalOrders += team.total;
                areaEfficiency[team.area].teams.push(team.name);
            });
            
            var areaHtml = '';
            for (var area in areaEfficiency) {
                var efficiency = (areaEfficiency[area].totalOrders / areaEfficiency[area].totalWorkers).toFixed(2);
                var teamCount = areaEfficiency[area].teams.length;
                
                areaHtml += `
                <div class="data-card">
                    <div class="data-card-title">${area}</div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px;">
                        <span>è½¦é˜Ÿ: <strong>${teamCount}ä¸ª</strong></span>
                        <span>äººæ•°: <strong>${areaEfficiency[area].totalWorkers}äºº</strong></span>
                        <span>äººæ•ˆ: <strong style="color: #4d90fe; font-size: 14px;">${efficiency}</strong></span>
                    </div>
                    <div style="font-size: 11px; color: #666; background: #f8f9fa; padding: 6px; border-radius: 4px;">
                        åŒ…å«è½¦é˜Ÿ: ${areaEfficiency[area].teams.join(', ')}
                    </div>
                </div>`;
            }
            
            $('#efficiency-district').html(areaHtml);
            
            // æ˜¾ç¤ºå¼¹çª—
            $('#efficiency-modal').show();
        }

        // æ˜¾ç¤ºè½¦é˜Ÿå°åŒºè¯¦æƒ…
        function showTeamEstates() {
            closeAllModals();
            
            // æ›´æ–°æ—¶é—´
            $('#team-estate-time').text(getCurrentTime());
            
            // è®¡ç®—æ€»æ•°
            var uniqueEstates = new Set();
            teamData.forEach(function(team) {
                team.estates.forEach(function(estate) {
                    uniqueEstates.add(estate);
                });
            });
            
            var uniqueAreas = new Set(teamData.map(team => team.area));
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            $('#team-count').text(teamData.length);
            $('#estate-count').text(uniqueEstates.size);
            $('#area-count').text(uniqueAreas.size);
            
            // ç”Ÿæˆè½¦é˜Ÿå°åŒºåˆ†å¸ƒè¡¨æ ¼
            var teamEstatesHtml = '';
            teamData.forEach(function(team) {
                var teamClass = '';
                if (team.area.includes('æ²™ç”°')) teamClass = 'team-sha';
                else if (team.area.includes('å…ƒæœ—')) teamClass = 'team-yuen';
                else if (team.area.includes('ä¹é¾™')) teamClass = 'team-kow';
                else if (team.area.includes('å±¯é—¨')) teamClass = 'team-tuen';
                
                teamEstatesHtml += `<tr>
                    <td><span class="team-tag ${teamClass}">${team.name}</span></td>
                    <td>${team.area}</td>
                    <td><strong>${team.estates.length}</strong></td>
                    <td>${team.total}</td>
                </tr>`;
            });
            
            $('#team-estate-body').html(teamEstatesHtml);
            
            // ç”Ÿæˆå°åŒºè¯¦ç»†åˆ—è¡¨
            var estateListHtml = '';
            var allEstates = [];
            
            teamData.forEach(function(team) {
                team.estates.forEach(function(estateName) {
                    allEstates.push({
                        name: estateName,
                        team: team.name,
                        area: team.area
                    });
                });
            });
            
            // æŒ‰å°åŒºåæ’åº
            allEstates.sort((a, b) => a.name.localeCompare(b.name));
            
            // æ˜¾ç¤ºæ‰€æœ‰å°åŒº
            allEstates.forEach(function(estate, index) {
                var teamClass = '';
                if (estate.area.includes('æ²™ç”°')) teamClass = 'team-sha';
                else if (estate.area.includes('å…ƒæœ—')) teamClass = 'team-yuen';
                else if (estate.area.includes('ä¹é¾™')) teamClass = 'team-kow';
                else if (estate.area.includes('å±¯é—¨')) teamClass = 'team-tuen';
                
                estateListHtml += `<tr>
                    <td>${estate.name}</td>
                    <td><span class="team-tag ${teamClass}" style="font-size: 10px; padding: 2px 6px;">${estate.team}</span></td>
                    <td>${estate.area}</td>
                </tr>`;
            });
            
            $('#estate-list-body').html(estateListHtml);
            
            // æ˜¾ç¤ºå¼¹çª—
            $('#team-estate-modal').show();
        }

        // å…³é—­å¼¹çª—å‡½æ•°
        function closeModal(type) {
            if (type === 'progress') {
                $('#progress-modal').hide();
            } else if (type === 'efficiency') {
                $('#efficiency-modal').hide();
            } else if (type === 'team-estate') {
                $('#team-estate-modal').hide();
            } else {
                $('#data-modal').hide();
                selectedItem = null;
                selectedType = null;
            }
        }

        // å…³é—­æ‰€æœ‰å¼¹çª—
        function closeAllModals() {
            $('#data-modal').hide();
            $('#progress-modal').hide();
            $('#efficiency-modal').hide();
            $('#team-estate-modal').hide();
            selectedItem = null;
            selectedType = null;
        }

        $(document).ready(function() {
            console.log('é¦™æ¸¯å®…é…çœ‹æ¿ - æœ¬åœ°ç‰ˆåˆå§‹åŒ–');
            
            // æ£€æŸ¥å¿…è¦çš„åº“æ˜¯å¦åŠ è½½
            if (typeof echarts === 'undefined') {
                showErrorMessage('EChartsåº“æœªåŠ è½½', 'è¯·ç¡®ä¿ libs/echarts.min.js æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®ã€‚');
                return;
            }
            
            if (typeof $ === 'undefined') {
                showErrorMessage('jQueryåº“æœªåŠ è½½', 'è¯·ç¡®ä¿ libs/jquery.min.js æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®ã€‚');
                return;
            }
            
            // åˆå§‹åŒ–åœ°å›¾
            initMap();
            
            // çª—å£å¤§å°é€‚é…
            window.addEventListener('resize', function() {
                myChart.resize();
            });
            
            // åˆå§‹æ˜¾ç¤ºä¸€ä¸ªåŒºè¯¦æƒ…
            setTimeout(function() {
                showDistrictDetail('æ²™ç”°åŒº');
            }, 1000);
            
            // æ¯30ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
            setInterval(function() {
                $('.timestamp').each(function() {
                    $(this).text('æ•°æ®æ¯åˆ†é’Ÿè‡ªåŠ¨æ›´æ–° | æœ€åæ›´æ–°: ' + getCurrentTime());
                });
            }, 30000);
            
            console.log('åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
</body>
</html>